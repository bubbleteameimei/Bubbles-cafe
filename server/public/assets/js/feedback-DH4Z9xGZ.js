import{j as e}from"./ui-XowJfzQ7.js";import{r as s,L as r}from"./router-ft_y90OU.js";import{q as a,c as l,C as t,e as i,f as n,g as c,h as d,B as o,M as x,bT as m,N as h,O as u,P as j,a1 as p,aH as b,aK as N,n as g,m as f}from"./index-CaZ-hcXF.js";import{T as y,b as v,c as w,d as k,e as C,f as L}from"./table-CIMJ6G5B.js";import{f as W}from"./utils-SDRWPbZe.js";import"./vendor-BbHwBAXo.js";import"./charts-DEf8bB7g.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";const F=a("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),S=a("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),M=({status:s})=>{const r={pending:{color:"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100",icon:e.jsxs("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 7V12L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),label:"Pending"},reviewed:{color:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",icon:e.jsxs("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]}),label:"Reviewed"},resolved:{color:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100",icon:e.jsx("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),label:"Resolved"},rejected:{color:"bg-red-50 text-red-700 border-red-200 hover:bg-red-100",icon:e.jsx("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),label:"Rejected"}}[s]||{color:"bg-gray-50 text-gray-700 border-gray-200",icon:e.jsxs("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 16V16.01M12 8V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),label:s.charAt(0).toUpperCase()+s.slice(1)};return e.jsxs(f,{className:`${r.color} flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors duration-200`,children:[r.icon,r.label]})};function B(){const[a,f]=s.useState("history"),{data:B,isLoading:Y}=l({queryKey:["/api/auth/status"],queryFn:async()=>{const e=await fetch("/api/auth/status");if(!e.ok)throw new Error("Failed to fetch auth status");return e.json()}}),{data:T,isLoading:q,isError:R,refetch:A}=l({queryKey:["/api/user/feedback"],queryFn:async()=>{const e=await fetch("/api/user/feedback");if(!e.ok)throw new Error("Failed to fetch user feedback");return e.json()},enabled:B?.isAuthenticated}),{data:V,isLoading:E}=l({queryKey:["/api/user/feedback/stats"],queryFn:async()=>{const e=await fetch("/api/user/feedback/stats");if(!e.ok)throw new Error("Failed to fetch feedback stats");return e.json()},enabled:B?.isAuthenticated});if(Y||q||E)return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Feedback"}),e.jsx("div",{className:"text-center py-12",children:"Loading..."})]});const K=B?.isAuthenticated||!1,P=K?"Your Feedback":"Feedback and Suggestions";if(!K)return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:P}),e.jsxs(t,{className:"mb-6 shadow-md border border-primary/20 relative overflow-hidden",children:[e.jsxs(i,{className:"border-b border-gray-100",children:[e.jsxs(n,{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:e.jsx(S,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{children:"Sign in for enhanced feedback tracking"})]}),e.jsx(c,{className:"pl-14",children:"Create an account to track your feedback submissions and receive status updates"})]}),e.jsx(d,{className:"pt-4",children:e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsx(o,{variant:"outline",className:"flex-1 border-primary/20",asChild:!0,children:e.jsx(r,{to:"/login",className:"inline-flex items-center justify-center",children:"Sign in"})}),e.jsx(o,{className:"flex-1",asChild:!0,children:e.jsx(r,{to:"/register",className:"inline-flex items-center justify-center",children:"Create account"})})]})})]}),e.jsxs(t,{className:"mb-6 shadow-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute -left-10 -top-10 w-32 h-32 bg-primary/5 rounded-full blur-xl"}),e.jsxs(i,{className:"border-b border-b-gray-100",children:[e.jsxs(n,{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:e.jsx(x,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{children:"Share Your Thoughts With Us!"})]}),e.jsxs(c,{className:"pl-14",children:[e.jsx("span",{className:"font-medium",children:"No login required"})," - we're excited to hear what you think!"]})]}),e.jsxs(d,{className:"pt-6 relative",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-5",children:"Your suggestions help us improve Bubble's Café. We appreciate your valuable input."}),e.jsx(m,{})]})]})]});if(0===T?.feedback?.length)return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:P}),e.jsxs(t,{className:"mb-6 shadow-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute -left-10 -top-10 w-32 h-32 bg-primary/5 rounded-full blur-xl"}),e.jsxs(i,{className:"border-b border-b-gray-100",children:[e.jsxs(n,{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:e.jsx(x,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{children:"Be the First to Share Your Thoughts!"})]}),e.jsx(c,{className:"pl-14",children:"You haven't submitted any feedback yet. We'd love to hear from you!"})]}),e.jsxs(d,{className:"pt-6 relative",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-5",children:"Your suggestions help us improve Bubble's Café. We appreciate your valuable input."}),e.jsx(m,{})]})]})]});const U=V?.stats||{total:T?.feedback?.length||0,pending:0,reviewed:0,resolved:0,rejected:0};return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:P}),K&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs(t,{children:[e.jsx(i,{className:"py-4 px-4",children:e.jsx(n,{className:"text-sm font-medium text-gray-500",children:"Total"})}),e.jsx(d,{className:"py-0 px-4",children:e.jsx("p",{className:"text-2xl font-bold",children:U.total})})]}),e.jsxs(t,{className:"border-yellow-200",children:[e.jsx(i,{className:"py-4 px-4",children:e.jsx(n,{className:"text-sm font-medium text-yellow-600",children:"Pending"})}),e.jsx(d,{className:"py-0 px-4",children:e.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:U.pending})})]}),e.jsxs(t,{className:"border-blue-200",children:[e.jsx(i,{className:"py-4 px-4",children:e.jsx(n,{className:"text-sm font-medium text-blue-600",children:"Reviewed"})}),e.jsx(d,{className:"py-0 px-4",children:e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:U.reviewed})})]}),e.jsxs(t,{className:"border-green-200",children:[e.jsx(i,{className:"py-4 px-4",children:e.jsx(n,{className:"text-sm font-medium text-green-600",children:"Resolved"})}),e.jsx(d,{className:"py-0 px-4",children:e.jsx("p",{className:"text-2xl font-bold text-green-700",children:U.resolved})})]}),e.jsxs(t,{className:"border-red-200",children:[e.jsx(i,{className:"py-4 px-4",children:e.jsx(n,{className:"text-sm font-medium text-red-600",children:"Rejected"})}),e.jsx(d,{className:"py-0 px-4",children:e.jsx("p",{className:"text-2xl font-bold text-red-700",children:U.rejected})})]})]}),e.jsxs(h,{defaultValue:a,onValueChange:f,className:"w-full",children:[e.jsxs(u,{className:"grid w-full grid-cols-2",children:[e.jsx(j,{value:"history",children:"Feedback History"}),e.jsx(j,{value:"new",children:"Submit New Feedback"})]}),e.jsxs(p,{value:"history",className:"pt-6",children:[R&&e.jsxs(t,{className:"border-red-200 shadow-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute -right-6 -bottom-6 w-24 h-24 bg-red-50 rounded-full blur-xl"}),e.jsx(i,{className:"bg-gradient-to-r from-red-50 to-red-100/60",children:e.jsxs(n,{className:"text-red-700 flex items-center",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-full mr-3",children:e.jsx(b,{className:"h-5 w-5 text-red-500"})}),"Oops! Something Went Wrong"]})}),e.jsxs(d,{className:"pt-4",children:[e.jsx("div",{className:"text-gray-600 mb-4 pl-14",children:"There was a problem loading your feedback. Let's try again!"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(o,{variant:"outline",onClick:()=>A(),className:"mt-2 border-red-200 hover:bg-red-50 group transition-all duration-300",children:[e.jsx(N,{className:"mr-2 h-4 w-4 text-red-500 group-hover:rotate-180 transition-all duration-500"}),e.jsx("span",{className:"text-red-500",children:"Refresh Data"})]})})]})]}),!R&&e.jsxs(t,{className:"shadow-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute -right-10 -top-10 w-32 h-32 bg-primary/5 rounded-full blur-xl"}),e.jsxs(i,{className:"border-b border-b-gray-100",children:[e.jsxs(n,{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:e.jsx(x,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{children:"Your Feedback Journey"})]}),e.jsx(c,{className:"pl-14",children:"Track the status of all your previous feedback submissions"})]}),e.jsx(d,{className:"pt-6",children:e.jsxs(y,{children:[e.jsx(v,{children:e.jsxs(w,{className:"bg-primary/5",children:[e.jsx(k,{className:"font-medium",children:"Type"}),e.jsx(k,{className:"font-medium",children:"Content"}),e.jsx(k,{className:"font-medium",children:"Status"}),e.jsx(k,{className:"font-medium",children:"Submitted"})]})}),e.jsx(C,{children:T.feedback.map(s=>e.jsxs(w,{className:"hover:bg-gray-50/80",children:[e.jsx(L,{className:"font-medium capitalize",children:s.type}),e.jsx(L,{className:"max-w-xs truncate",children:s.content}),e.jsx(L,{children:e.jsx(M,{status:s.status})}),e.jsx(L,{className:"text-muted-foreground",children:W(new Date(s.createdAt),{addSuffix:!0})})]},s.id))})]})}),e.jsx(g,{className:"bg-gray-50/50 border-t border-t-gray-100",children:e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>f("new"),className:"group border-primary/20 hover:bg-primary/5 transition-all duration-300",children:[e.jsx(F,{className:"mr-2 h-4 w-4 text-primary group-hover:scale-110 transition-all duration-300"}),e.jsx("span",{className:"text-primary",children:"Share New Feedback"})]})})]})]}),e.jsx(p,{value:"new",className:"pt-6",children:e.jsxs(t,{className:"shadow-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute -left-10 -top-10 w-32 h-32 bg-primary/5 rounded-full blur-xl"}),e.jsxs(i,{className:"border-b border-b-gray-100",children:[e.jsxs(n,{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-full mr-3",children:e.jsx(x,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{children:"Share Your Thoughts With Us!"})]}),e.jsx(c,{className:"pl-14",children:"We value your input to help us improve our service"})]}),e.jsxs(d,{className:"pt-6 relative",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-5",children:"Your suggestions help us improve Bubble's Café. We appreciate your valuable input."}),e.jsx(m,{})]})]})})]})]})}export{B as default};
