import{j as e}from"./ui-XowJfzQ7.js";import{r as s,d as a}from"./router-ft_y90OU.js";import{q as t,u as i,c as r,aV as l,aX as c,ay as n,az as d,aA as x,aB as o,aC as h,B as m,N as j,O as u,P as p,bx as f,a1 as v,C as y,e as g,f as N,b6 as w,h as b,ba as k,l as R,aF as M,g as S,m as D,L as T}from"./index-CaZ-hcXF.js";import{a as P,c as C,d as K,b as F}from"./chart-lnxEZq93.js";import{P as V}from"./progress-CHSBJggg.js";import{C as L}from"./chart-no-axes-column-increasing-BTCwDtP-.js";import{R as W,A,X as O,Y as $,C as B,f as q,P as G,a as U,B as z,e as E,b as X,d as H}from"./charts-DEf8bB7g.js";import{L as Y,T as I}from"./tablet-BIKd0Ro9.js";import{S as J}from"./smartphone-BdcLUC2s.js";import"./vendor-BbHwBAXo.js";import"./utils-SDRWPbZe.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";const Q=t("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Z=t("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),_=()=>e.jsx("div",{className:"flex items-center justify-center w-full h-[50vh]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(T,{className:"h-12 w-12 animate-spin text-primary"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading analytics data..."})]})}),ee=({active:s,payload:a,label:t})=>s&&a&&a.length?e.jsx(F,{active:s,payload:a,label:t,formatter:e=>e.toLocaleString()}):null;function se(){const{user:t}=i(),[T,F]=s.useState("week"),[se,ae]=s.useState("overview");if(!t?.isAdmin)return e.jsx(a,{to:"/"});const{data:te,isLoading:ie,error:re}=r({queryKey:["/api/admin/analytics"],queryFn:async()=>{const e=await fetch("/api/admin/analytics");if(!e.ok)throw new Error("Failed to fetch analytics data");return e.json()}}),le=te?.timeSeriesData||[{date:"Mar 8",views:1200,visitors:850},{date:"Mar 9",views:1300,visitors:900},{date:"Mar 10",views:1500,visitors:950},{date:"Mar 11",views:1400,visitors:920},{date:"Mar 12",views:1800,visitors:1100},{date:"Mar 13",views:2e3,visitors:1250},{date:"Mar 14",views:1900,visitors:1200}],ce=te?[{name:"Desktop",value:te.deviceDistribution?.desktop||60},{name:"Mobile",value:te.deviceDistribution?.mobile||35},{name:"Tablet",value:te.deviceDistribution?.tablet||5}]:[],ne=te?[{name:"Direct",value:te.trafficSources?.direct||40},{name:"Search",value:te.trafficSources?.search||30},{name:"Social",value:te.trafficSources?.social||20},{name:"Referral",value:te.trafficSources?.referral||10}]:[],de=te?.pagePerformance||[],xe=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return ie?e.jsx(_,{}):re?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(l,{variant:"destructive",children:e.jsx(c,{children:"Failed to load analytics data. Please try again later."})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Site Statistics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive analytics and performance metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{value:T,onValueChange:F,children:[e.jsx(d,{className:"w-36",children:e.jsx(x,{placeholder:"Select range"})}),e.jsxs(o,{children:[e.jsx(h,{value:"day",children:"Today"}),e.jsx(h,{value:"week",children:"Last 7 days"}),e.jsx(h,{value:"month",children:"Last 30 days"}),e.jsx(h,{value:"quarter",children:"Last 3 months"}),e.jsx(h,{value:"year",children:"Last year"})]})]}),e.jsx(m,{variant:"outline",size:"sm",children:"Export Data"})]})]}),e.jsxs(j,{value:se,onValueChange:ae,className:"space-y-8",children:[e.jsxs(u,{className:"grid grid-cols-4 lg:w-[600px]",children:[e.jsxs(p,{value:"overview",className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Overview"})]}),e.jsxs(p,{value:"traffic",className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:"Traffic"})]}),e.jsxs(p,{value:"content",className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:"Content"})]}),e.jsxs(p,{value:"engagement",className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Engagement"})]})]}),e.jsxs(v,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(y,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Total Views"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te?.totalViews.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total page views across all stories"})]})]}),e.jsxs(y,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Unique Visitors"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te?.uniqueVisitors.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Distinct readers on the platform"})]})]}),e.jsxs(y,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Avg. Reading Time"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te&&`${Math.floor(te.avgReadTime/60)}m ${Math.round(te.avgReadTime%60)}s`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time spent on stories"})]})]}),e.jsxs(y,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Bounce Rate"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te?`${Math.round(100*te.bounceRate)}%`:"0%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Single-page sessions"})]})]})]}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Visitors & Page Views"}),e.jsx(S,{children:"Last 7 days traffic trends"})]}),e.jsx(b,{children:e.jsx("div",{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(A,{data:le,margin:{top:20,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorViews",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorVisitors",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:.1})]})]}),e.jsx(O,{dataKey:"date"}),e.jsx($,{}),e.jsx(B,{strokeDasharray:"3 3",opacity:.1}),e.jsx(P,{content:e.jsx(ee,{})}),e.jsx(q,{type:"monotone",dataKey:"views",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorViews)"}),e.jsx(q,{type:"monotone",dataKey:"visitors",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorVisitors)"}),e.jsx(C,{})]})})})})]}),e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Device Distribution"}),e.jsx(S,{children:"User access by device type"})]}),e.jsxs(b,{className:"flex flex-col h-80",children:[e.jsx("div",{className:"flex-1",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(G,{children:[e.jsx(U,{data:ce,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{const s=e?.name;return`${s} ${(100*(e?.percent??0)).toFixed(0)}%`},children:ce.map((s,a)=>e.jsx(K,{fill:xe[a%xe.length]},`cell-${a}`))}),e.jsx(P,{}),e.jsx(C,{})]})})}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[ce[0]?.value,"% Desktop"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[ce[1]?.value,"% Mobile"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[ce[2]?.value,"% Tablet"]})]})]})]})]})]})]}),e.jsx(v,{value:"traffic",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Traffic Sources"}),e.jsx(S,{children:"Where your visitors come from"})]}),e.jsx(b,{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(z,{data:ne,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(O,{type:"number"}),e.jsx($,{dataKey:"name",type:"category"}),e.jsx(B,{strokeDasharray:"3 3",opacity:.1}),e.jsx(P,{content:e.jsx(ee,{})}),e.jsx(C,{}),e.jsx(E,{dataKey:"value",name:"Percentage",fill:"#8884d8",radius:[0,4,4,0]})]})})})]}),e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Traffic Trends"}),e.jsx(S,{children:"Daily website traffic patterns"})]}),e.jsx(b,{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(X,{data:le,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(B,{strokeDasharray:"3 3",opacity:.1}),e.jsx(O,{dataKey:"date"}),e.jsx($,{}),e.jsx(P,{content:e.jsx(ee,{})}),e.jsx(C,{}),e.jsx(H,{type:"monotone",dataKey:"views",stroke:"#8884d8",activeDot:{r:8},name:"Views"}),e.jsx(H,{type:"monotone",dataKey:"visitors",stroke:"#82ca9d",name:"Visitors"})]})})})]}),e.jsxs(y,{className:"lg:col-span-2",children:[e.jsxs(g,{children:[e.jsx(N,{children:"Geographic Distribution"}),e.jsx(S,{children:"Top regions by visitor count"})]}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"United States"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"45%"}),e.jsx(D,{variant:"outline",className:"text-xs",children:"+5.2%"})]})]}),e.jsx(V,{value:45,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"United Kingdom"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"15%"}),e.jsx(D,{variant:"outline",className:"text-xs",children:"+1.8%"})]})]}),e.jsx(V,{value:15,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Canada"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"12%"}),e.jsx(D,{variant:"outline",className:"text-xs",children:"+2.3%"})]})]}),e.jsx(V,{value:12,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Australia"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"8%"}),e.jsx(D,{variant:"outline",className:"text-xs",children:"+0.5%"})]})]}),e.jsx(V,{value:8,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Germany"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"5%"}),e.jsx(D,{variant:"outline",className:"text-xs",children:"+1.1%"})]})]}),e.jsx(V,{value:5,className:"h-2"})]})})]})]})}),e.jsxs(v,{value:"content",className:"space-y-6",children:[e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Top Performing Content"}),e.jsx(S,{children:"Most viewed stories and pages"})]}),e.jsx(b,{children:e.jsx("div",{className:"space-y-6",children:de.length>0?e.jsx("div",{className:"space-y-4",children:de.map((s,a)=>e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-muted-foreground",children:[a+1,"."]}),e.jsx("span",{className:"font-medium",children:s.title})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.views.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[Math.floor(s.avgTime/60),"m ",Math.round(s.avgTime%60),"s"]})]})]})]}),e.jsx(V,{value:s.views/Math.max(...de.map(e=>e.views))*100,className:"h-2"})]},a))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No content performance data available."})})})})]}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Content Categories"}),e.jsx(S,{children:"Performance by story category"})]}),e.jsx(b,{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(G,{children:[e.jsx(U,{data:[{name:"Psychological",value:35},{name:"Supernatural",value:25},{name:"Body Horror",value:20},{name:"Gothic",value:10},{name:"Other",value:10}],cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{const s=e?.name;return`${s} ${(100*(e?.percent??0)).toFixed(0)}%`},children:ce.map((s,a)=>e.jsx(K,{fill:xe[a%xe.length]},`cell-${a}`))}),e.jsx(P,{}),e.jsx(C,{})]})})})]}),e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Publication Analysis"}),e.jsx(S,{children:"Views by publication day"})]}),e.jsx(b,{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(z,{data:[{day:"Mon",views:850},{day:"Tue",views:740},{day:"Wed",views:900},{day:"Thu",views:1200},{day:"Fri",views:1500},{day:"Sat",views:1300},{day:"Sun",views:1100}],children:[e.jsx(B,{strokeDasharray:"3 3",opacity:.1}),e.jsx(O,{dataKey:"day"}),e.jsx($,{}),e.jsx(P,{content:e.jsx(ee,{})}),e.jsx(E,{dataKey:"views",name:"Views",fill:"#8884d8",radius:[4,4,0,0]})]})})})]})]})]}),e.jsxs(v,{value:"engagement",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 grid-cols-2 lg:grid-cols-4",children:[e.jsxs(y,{children:[e.jsx(g,{className:"pb-2",children:e.jsx(N,{className:"text-sm",children:"Comments per Post"})}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold",children:te?.engagementMetrics?.commentsPerPost.toFixed(1)||"5.7"})})]}),e.jsxs(y,{children:[e.jsx(g,{className:"pb-2",children:e.jsx(N,{className:"text-sm",children:"Likes per Post"})}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold",children:te?.engagementMetrics?.likesPerPost.toFixed(1)||"12.4"})})]}),e.jsxs(y,{children:[e.jsx(g,{className:"pb-2",children:e.jsx(N,{className:"text-sm",children:"Avg. Read %"})}),e.jsx(b,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[te?.engagementMetrics?.avgReadPercentage.toFixed(0)||"76","%"]})})]}),e.jsxs(y,{children:[e.jsx(g,{className:"pb-2",children:e.jsx(N,{className:"text-sm",children:"Return Rate"})}),e.jsx(b,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[te?.engagementMetrics?.returnRate.toFixed(0)||"42","%"]})})]})]}),e.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"Reading Patterns"}),e.jsx(S,{children:"Time of day analysis"})]}),e.jsx(b,{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(X,{data:[{hour:"00:00",users:120},{hour:"03:00",users:80},{hour:"06:00",users:150},{hour:"09:00",users:350},{hour:"12:00",users:420},{hour:"15:00",users:380},{hour:"18:00",users:490},{hour:"21:00",users:520}],children:[e.jsx(B,{strokeDasharray:"3 3",opacity:.1}),e.jsx(O,{dataKey:"hour"}),e.jsx($,{}),e.jsx(P,{content:e.jsx(ee,{})}),e.jsx(H,{type:"monotone",dataKey:"users",stroke:"#8884d8",activeDot:{r:8},name:"Active Users"})]})})})]}),e.jsxs(y,{children:[e.jsxs(g,{children:[e.jsx(N,{children:"User Retention"}),e.jsx(S,{children:"Weekly user return rate"})]}),e.jsx(b,{className:"h-80",children:e.jsx(W,{width:"100%",height:"100%",children:e.jsxs(z,{data:[{week:"Week 1",returnRate:100},{week:"Week 2",returnRate:75},{week:"Week 3",returnRate:50},{week:"Week 4",returnRate:42},{week:"Week 5",returnRate:40},{week:"Week 6",returnRate:38},{week:"Week 7",returnRate:35},{week:"Week 8",returnRate:30}],children:[e.jsx(B,{strokeDasharray:"3 3",opacity:.1}),e.jsx(O,{dataKey:"week"}),e.jsx($,{}),e.jsx(P,{content:e.jsx(ee,{})}),e.jsx(E,{dataKey:"returnRate",name:"Return Rate %",fill:"#8884d8",radius:[4,4,0,0]})]})})})]})]})]})]})]})}export{se as default};
