import{j as e}from"./ui-XowJfzQ7.js";import{u as s,r as t,d as a}from"./router-ft_y90OU.js";import{q as r,Z as m,u as i,b as n,a as c,L as l,B as o,by as d,C as x,N as h,O as p,P as j,bo as u,a1 as g,h as b}from"./index-CaZ-hcXF.js";import{T as f}from"./theme-categories-lLtkwf9j.js";import N from"./WordPressSyncPage-RiYXeiBd.js";import{P as y,C as v}from"./content-D_3oWE7C.js";import{S as w}from"./square-pen-CNm1iWHN.js";import"./vendor-BbHwBAXo.js";import"./charts-DEf8bB7g.js";import"./utils-SDRWPbZe.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";import"./globe-DlAfDjMl.js";import"./activity-DRdt7PF2.js";import"./table-CIMJ6G5B.js";import"./checkbox-CZs5qr2K.js";import"./external-link-Ca9vM-vs.js";const S=r("Rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);function P({heading:s,description:t,children:a,className:r}){return e.jsxs("div",{className:m("flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",r),children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s}),t&&e.jsx("p",{className:"text-muted-foreground mt-1",children:t})]}),a&&e.jsx("div",{className:"ml-auto",children:a})]})}function k(){const{user:r,isLoading:m}=i(),k=r;n();const[T,C]=s(),{toast:M}=c(),[W,z]=t.useState("content"),[F,O]=t.useState(!1),[q,A]=t.useState(!1),E=t.useMemo(()=>Object.values(f).slice(0,5).map(e=>e.label),[]),L=Object.keys(f).length;return m?e.jsxs("div",{className:"container mx-auto px-4 py-8 flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx(l,{className:"h-8 w-8 animate-spin mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Verifying access..."})]}):k?.isAdmin?e.jsxs("div",{className:"container mx-auto py-4 sm:py-6 space-y-4 sm:space-y-6 px-3 sm:px-6",children:[e.jsx(P,{heading:"Content Management",description:"Manage stories, WordPress sync, and content settings",className:"flex flex-col",children:e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 sm:mt-0",children:[e.jsx(o,{onClick:async()=>{if(q)M({title:"Sync in Progress",description:"A WordPress sync is already running. Please wait for it to complete."});else try{A(!0);const e=await fetch("/api/wordpress/sync",{method:"POST"});if(!e.ok)throw new Error(`Failed to trigger sync: ${e.statusText}`);M({title:"Sync Started",description:"WordPress sync has been started. This may take a few minutes."}),setTimeout(()=>{A(!1),M({title:"Sync Complete",description:"WordPress content has been synchronized successfully."})},5e3)}catch(e){A(!1),M({title:"Error",description:"Failed to start WordPress sync. Please try again.",variant:"destructive"})}},variant:"outline",disabled:q,className:"flex items-center gap-1 text-sm sm:text-base",size:"sm",children:q?e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 animate-spin mr-1"}),e.jsx("span",{children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{children:"Sync WP"})]})}),e.jsxs(o,{onClick:()=>{O(!0)},className:"flex items-center gap-1 text-sm sm:text-base",size:"sm",children:[e.jsx(d,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{children:"Create Story"})]})]})}),F?e.jsxs(x,{className:"p-3 sm:p-6 overflow-x-auto",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",id:"create-story-title",children:"Create New Story"}),e.jsx("div",{"aria-labelledby":"create-story-title",children:e.jsx(y,{onClose:()=>{O(!1)}})})]}):e.jsxs(h,{value:W,onValueChange:z,className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"overflow-x-auto pb-2 -mx-3 px-3",children:e.jsxs(p,{className:"grid grid-cols-3 w-full max-w-[500px] mb-2 sm:mb-4",children:[e.jsxs(j,{value:"content",className:"flex items-center justify-center gap-1 px-1 sm:px-4 text-sm sm:text-base",children:[e.jsx(u,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-0.5 sm:mr-1 inline"}),e.jsx("span",{className:"truncate",children:"Stories"})]}),e.jsxs(j,{value:"wordpress",className:"flex items-center justify-center gap-1 px-1 sm:px-4 text-sm sm:text-base",children:[e.jsx(S,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-0.5 sm:mr-1 inline"}),e.jsx("span",{className:"truncate",children:"WP Sync"})]}),e.jsxs(j,{value:"editor",className:"flex items-center justify-center gap-1 px-1 sm:px-4 text-sm sm:text-base",children:[e.jsx(w,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-0.5 sm:mr-1 inline"}),e.jsx("span",{className:"truncate",children:"Settings"})]})]})}),e.jsx(g,{value:"content",className:"space-y-4",children:e.jsx(v,{})}),e.jsx(g,{value:"wordpress",className:"space-y-4",children:e.jsx(N,{})}),e.jsx(g,{value:"editor",className:"space-y-4",children:e.jsx(x,{children:e.jsxs(b,{className:"pt-4 sm:pt-6 px-3 sm:px-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4",children:"Editor Settings"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3 sm:mb-4",children:"Configure theme options, default categories, and editor preferences for all stories."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"border rounded-md p-3 sm:p-4 bg-amber-50 text-amber-600",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Theme Icons"}),e.jsxs("p",{className:"text-xs sm:text-sm",children:["Theme icons are used to visually represent the theme categories in the editor and on story cards. The platform now supports ",L," different icons for horror themes."]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[["skull","ghost","brain","eye","scissors"].map(s=>e.jsx("div",{className:"p-1.5 bg-amber-100 rounded-md",title:s,children:e.jsx("span",{className:`text-amber-700 text-lg icon-${s}`,children:"âš‰"})},s)),e.jsx("div",{className:"p-1.5 bg-amber-100 rounded-md",children:e.jsxs("span",{className:"text-amber-700 text-xs",children:["+",L-5," more"]})})]})]}),e.jsxs("div",{className:"border rounded-md p-3 sm:p-4 bg-blue-50 text-blue-600",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Theme Categories"}),e.jsxs("p",{className:"text-xs sm:text-sm",children:["Theme categories help categorize stories by their horror subgenre or theme. The editor now includes ",L," different theme categories with specialized icons."]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[E.map(s=>e.jsx("div",{className:"px-2 py-0.5 bg-blue-100 rounded text-xs",children:s},s)),e.jsxs("div",{className:"px-2 py-0.5 bg-blue-100 rounded text-xs",children:["+",L-5," more"]})]})]}),e.jsxs("div",{className:"border rounded-md p-3 sm:p-4 bg-green-50 text-green-600 md:col-span-2",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Theme Management"}),e.jsx("p",{className:"text-xs sm:text-sm mb-2",children:"Manage all theme settings from a single dedicated interface in the Theme Management section."}),e.jsx(o,{variant:"outline",size:"sm",className:"text-xs sm:text-sm text-green-600 border-green-200 hover:bg-green-100 hover:text-green-700",onClick:()=>C("/admin/themes"),children:"Go to Theme Management"})]})]})]})})})]})]}):e.jsx(a,{to:"/"})}export{k as default};
