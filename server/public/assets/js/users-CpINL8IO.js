import{j as s}from"./ui-XowJfzQ7.js";import{a as e,d as a}from"./router-ft_y90OU.js";import{u as r,c as i,B as n,C as t,e as l,f as c,r as d,I as j,h as x,L as o,D as h,s as m,t as u,y as p}from"./index-CaZ-hcXF.js";import{T as f,b as N,c as v,d as w,e as g,f as y}from"./table-CIMJ6G5B.js";import{E as L}from"./ellipsis-vertical-18IjHuS2.js";import"./vendor-BbHwBAXo.js";import"./charts-DEf8bB7g.js";import"./utils-SDRWPbZe.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";function b(){const{user:b}=r(),[U,A]=e.useState(""),{data:D,isLoading:C}=i({queryKey:["/api/admin/users",U],queryFn:async()=>{const s=await fetch("/api/admin/users"+(U?`?search=${U}`:""));if(!s.ok)throw new Error("Failed to fetch users");return s.json()}});return b?.isAdmin?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold",children:"User Management"}),s.jsx(n,{children:"Add User"})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(c,{children:"User List"}),s.jsxs("div",{className:"relative w-64",children:[s.jsx(d,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(j,{placeholder:"Search users...",className:"pl-8",value:U,onChange:s=>A(s.target.value)})]})]})}),s.jsx(x,{children:C?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(o,{className:"h-8 w-8 animate-spin"})}):s.jsxs(f,{children:[s.jsx(N,{children:s.jsxs(v,{children:[s.jsx(w,{children:"Username"}),s.jsx(w,{children:"Email"}),s.jsx(w,{children:"Role"}),s.jsx(w,{children:"Created"}),s.jsx(w,{children:"Last Login"}),s.jsx(w,{className:"w-[50px]"})]})}),s.jsx(g,{children:D?.map(e=>s.jsxs(v,{children:[s.jsx(y,{children:e.username}),s.jsx(y,{children:e.email}),s.jsx(y,{children:e.isAdmin?"Admin":"User"}),s.jsx(y,{children:new Date(e.createdAt).toLocaleDateString()}),s.jsx(y,{children:new Date(e.lastLogin).toLocaleDateString()}),s.jsx(y,{children:s.jsxs(h,{children:[s.jsx(m,{asChild:!0,children:s.jsxs(n,{variant:"ghost",size:"icon",children:[s.jsx(L,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Actions"})]})}),s.jsxs(u,{align:"end",children:[s.jsx(p,{children:"Edit User"}),s.jsx(p,{className:"text-destructive",children:"Delete User"})]})]})})]},e.id))})]})})]})]}):s.jsx(a,{to:"/"})}export{b as default};
