import{j as e}from"./ui-XowJfzQ7.js";import{r as s}from"./router-ft_y90OU.js";import{c as a,V as t,B as i,bb as r,F as n,N as l,O as c,P as d,l as o,a1 as m,C as x,e as h,f as j,h as u,g as f,n as g}from"./index-CaZ-hcXF.js";import{L as N}from"./layout-dashboard-PKafkZmC.js";import{C as p}from"./chart-no-axes-column-increasing-BTCwDtP-.js";import{a as v}from"./utils-SDRWPbZe.js";import"./vendor-BbHwBAXo.js";import"./charts-DEf8bB7g.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";const w={totalReadTime:0,averageReadTime:0,totalPosts:0,uniqueVisitors:0,avgReadTime:0,bounceRate:0},y={totalReadingTime:0,averageSessionDuration:0,totalUsers:0,activeUsers:0,interactions:0,pageViews:0,returning:0};async function b(){try{const e=await fetch("/api/analytics/reading-time");if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return w}}async function T(){try{const e=await fetch("/api/analytics/engagement");if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return y}}function R(s){return e.jsx("div",{className:"flex items-center justify-center h-48 border rounded-md text-muted-foreground",children:"Device analytics coming soon"})}function S(s){return e.jsx("div",{className:"flex items-center justify-center h-48 border rounded-md text-muted-foreground",children:"Reading analytics coming soon"})}function k(){const[w,y]=s.useState("overview"),[k,D]=s.useState(0),{data:L,isLoading:U,error:V,refetch:q}=a({queryKey:["/api/analytics/reading-time",k],queryFn:b,staleTime:3e5}),{data:A,isLoading:C,error:P,refetch:E}=a({queryKey:["/api/analytics/engagement",k],queryFn:T,staleTime:3e5}),z=()=>{D(e=>e+1),q(),E()},F=V||P;return U||C?e.jsxs("div",{className:"space-y-4 p-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(t,{className:"h-8 w-64"}),e.jsx(t,{className:"h-10 w-32"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{className:"h-[400px] w-full"}),e.jsx(t,{className:"h-[400px] w-full"})]})]}):F?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh] p-8",children:[e.jsx("div",{className:"text-xl font-semibold text-red-500 mb-4",children:"Error loading analytics data"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"There was a problem fetching analytics information."}),e.jsxs(i,{onClick:z,variant:"outline",children:[e.jsx(r,{className:"mr-2 h-4 w-4"})," Try Again"]})]}):e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive insights and statistics about site usage and engagement"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:z,children:[e.jsx(r,{className:"mr-2 h-4 w-4"}),"Refresh Data"]}),e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(n,{className:"mr-2 h-4 w-4"}),"Settings"]})]})]}),e.jsxs(l,{defaultValue:"overview",value:w,onValueChange:y,className:"space-y-4",children:[e.jsxs(c,{children:[e.jsxs(d,{value:"overview",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(d,{value:"devices",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Devices"]}),e.jsxs(d,{value:"reading",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Reading"]})]}),e.jsxs(m,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Total Visitors"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:L?.uniqueVisitors.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique visitors this period"})]})]}),e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Page Views"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A?.pageViews.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total page views"})]})]}),e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Active Users"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A?.activeUsers.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active users"})]})]}),e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Interactions"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A?.interactions.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All clicks and engagements"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Reading Time"})}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Math.floor((A?.totalReadingTime||0)/60),"m ",(A?.totalReadingTime||0)%60,"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total time spent reading"})]})]}),e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Avg. Session"})}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Math.floor((A?.averageSessionDuration||0)/60),"m ",Math.floor((A?.averageSessionDuration||0)%60),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average user session length"})]})]}),e.jsxs(x,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Returning Users"})}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A?.returning.toLocaleString()||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users with multiple visits"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(R,{}),e.jsx(S,{})]})]}),e.jsx(m,{value:"devices",className:"space-y-4",children:e.jsx(R,{})}),e.jsx(m,{value:"reading",className:"space-y-4",children:e.jsx(S,{})})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(j,{children:"Data Update Status"}),e.jsx(f,{children:"Information about the last analytics data refresh"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last updated:"}),e.jsx("span",{className:"font-medium",children:v(new Date,"PPpp")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Update frequency:"}),e.jsx("span",{className:"font-medium",children:"Every 5 minutes"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Data source:"}),e.jsx("span",{className:"font-medium",children:"Primary Analytics API"})]})]})}),e.jsx(g,{children:e.jsxs(i,{variant:"outline",size:"sm",onClick:z,className:"w-full",children:[e.jsx(r,{className:"mr-2 h-4 w-4"}),"Refresh Now"]})})]})]})}export{k as default};
