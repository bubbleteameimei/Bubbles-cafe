import{j as e}from"./ui-XowJfzQ7.js";import{r as s}from"./router-ft_y90OU.js";import{q as t,Z as a,B as i,bn as r,aT as n,bo as l,M as d,G as c,ai as m,bc as o,aM as u,F as x,aL as p}from"./index-CaZ-hcXF.js";import{f as h,p as j,i as g,d as f,a as v}from"./utils-SDRWPbZe.js";import{U as N}from"./user-plus-Bwzf3kyX.js";const y=t("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);function b({children:t,groups:l=[],className:d,initialCollapsed:c=!0,showOlderText:m="Show older activities"}){const[o,u]=s.useState(l.reduce((e,s,t)=>(e[t]=!c||0===t,e),{}));return t?e.jsx("div",{className:a("space-y-0",d),children:t}):e.jsx("div",{className:a("space-y-6",d),children:l.map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:s.date}),t>0&&e.jsx(i,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>{return e=t,void u(s=>({...s,[e]:!s[e]}));var e},children:o[t]?e.jsx(r,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"h-4 w-4"})," ",e.jsx("span",{className:"ml-1 text-xs",children:m})]})})]}),o[t]&&e.jsx("div",{className:"space-y-0",children:s.items.map((t,a)=>e.jsx(k,{title:t.title,time:t.date??t.time,icon:t.icon,description:e.jsxs(e.Fragment,{children:[t.description&&e.jsx("div",{children:t.description}),t.user&&e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-2",children:t.user.avatar?e.jsx("img",{src:t.user.avatar,alt:t.user.name,className:"h-5 w-5 rounded-full"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-primary flex items-center justify-center text-xs text-primary-foreground font-medium",children:t.user.initials})}),e.jsx("span",{className:"text-xs",children:t.user.name})]})]}),variant:t.variant||"default",isLast:a===s.items.length-1},t.id))})]},`${s.date}-${t}`))})}function k({title:s,time:t,icon:i,description:r,variant:n="default",isLast:l=!1,className:d}){return e.jsxs("div",{className:a("relative flex gap-4",d),children:[e.jsxs("div",{className:"relative mt-1.5 flex-none",children:[e.jsx("div",{className:a("flex h-8 w-8 items-center justify-center rounded-full",{default:"bg-muted text-muted-foreground",primary:"bg-primary text-primary-foreground",success:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400",destructive:"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-400",muted:"bg-muted text-muted-foreground"}[n]),children:i||e.jsx("div",{className:"h-2 w-2 rounded-full bg-background"})}),!l&&e.jsx("div",{className:a("absolute left-1/2 top-8 h-full w-0.5 -translate-x-1/2",{default:"bg-muted",primary:"bg-primary/70",success:"bg-green-200 dark:bg-green-800",warning:"bg-yellow-200 dark:bg-yellow-800",destructive:"bg-red-200 dark:bg-red-800",muted:"bg-muted"}[n])})]}),e.jsxs("div",{className:"pb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-medium",children:s}),t&&e.jsx("div",{className:"text-xs text-muted-foreground",children:t})]}),r&&e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:r})]})]})}const w=s=>{const t=s.toLowerCase();return t.includes("content")||t.includes("post")||t.includes("story")?e.jsx(l,{className:"shrink-0 size-4 mt-1"}):t.includes("comment")?e.jsx(d,{className:"shrink-0 size-4 mt-1"}):t.includes("report")||t.includes("flag")?e.jsx(c,{className:"shrink-0 size-4 mt-1"}):t.includes("approve")?e.jsx(m,{className:"shrink-0 size-4 mt-1 text-green-500"}):t.includes("reject")||t.includes("delete")||t.includes("remove")?e.jsx(o,{className:"shrink-0 size-4 mt-1 text-red-500"}):t.includes("user")||t.includes("account")?e.jsx(N,{className:"shrink-0 size-4 mt-1"}):t.includes("warning")||t.includes("alert")?e.jsx(u,{className:"shrink-0 size-4 mt-1 text-amber-500"}):t.includes("setting")?e.jsx(x,{className:"shrink-0 size-4 mt-1"}):t.includes("permission")||t.includes("role")?e.jsx(p,{className:"shrink-0 size-4 mt-1"}):t.includes("upload")?e.jsx(y,{className:"shrink-0 size-4 mt-1"}):e.jsx(l,{className:"shrink-0 size-4 mt-1"})},z=e=>{const s=j(e);return g(s)?"Today":f(s)?"Yesterday":v(s,"d MMM, yyyy")},M=s=>{if(!s)return null;try{const t="string"==typeof s?JSON.parse(s):s;if("object"==typeof t)return e.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(t).map(([s,t])=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("span",{className:"font-medium",children:[s.replace(/([A-Z])/g," $1").trim(),":"]})," "," ",e.jsx("span",{className:"text-muted-foreground",children:String(t)})]},s))})}catch(t){}return s},T=({activities:s,className:t,initialCollapsed:a=!0})=>{const i=s.reduce((e,s)=>{const t=s.timestamp.split("T")[0];return e[t]||(e[t]=[]),e[t].push(s),e},{}),r=Object.entries(i).sort(([e],[s])=>new Date(s).getTime()-new Date(e).getTime()).map(([s,t])=>({date:z(s),items:t.map(s=>({id:s.id,title:e.jsx("span",{children:s.action}),icon:w(s.action),description:M(s.details),user:s.performedBy?{name:s.performedBy,initials:s.performedBy.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}:void 0,time:h(j(s.timestamp),{addSuffix:!0}),variant:"default"}))}));return e.jsx(b,{groups:r,className:t||void 0,initialCollapsed:a,showOlderText:"Show older activities"})};export{T as A};
