import{j as s}from"./ui-XowJfzQ7.js";import{u as e,c as a,aM as i,B as t,bm as l,bo as n,ba as c,M as r,bl as d,N as m,O as x,P as o,a1 as j,C as h,e as u,f,g as N,h as p,S as v,m as w,b6 as y,n as g,l as b,U as k,G as C,V as A,z as L,bw as S}from"./index-CaZ-hcXF.js";import{A as M}from"./activity-timeline-QGB55YTh.js";import{r as P,d as D}from"./router-ft_y90OU.js";import{a as K,c as T}from"./chart-lnxEZq93.js";import{P as U}from"./progress-CHSBJggg.js";import{R as z,b as R,C as F,X as V,Y as q,d as E,B,e as O}from"./charts-DEf8bB7g.js";import{C as W}from"./chart-column-increasing-qdZvNszh.js";import{A as I}from"./activity-DRdt7PF2.js";import"./vendor-BbHwBAXo.js";import"./utils-SDRWPbZe.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";import"./user-plus-Bwzf3kyX.js";const Y=[{name:"Mon",visits:20,comments:5,likes:10},{name:"Tue",visits:15,comments:3,likes:7},{name:"Wed",visits:25,comments:7,likes:12},{name:"Thu",visits:30,comments:10,likes:15},{name:"Fri",visits:22,comments:6,likes:11},{name:"Sat",visits:18,comments:4,likes:8},{name:"Sun",visits:28,comments:8,likes:14}];function $(){const{user:S}=e(),$=S,[X,H]=P.useState("week");if(!$?.isAdmin)return s.jsx(D,{to:"/"});const{data:J,isLoading:Z,error:_}=a({queryKey:["/api/admin/info"],queryFn:async()=>{const s=await fetch("/api/admin/info");if(!s.ok)throw new Error("Failed to fetch dashboard data");return s.json()}}),{data:ss,isLoading:es}=a({queryKey:["/api/admin/analytics"],queryFn:async()=>{const s=await fetch("/api/admin/analytics");if(!s.ok)throw new Error("Failed to fetch analytics data");return s.json()}}),{data:as,isLoading:is}=a({queryKey:["/api/admin/activity"],queryFn:async()=>{const s=await fetch("/api/admin/activity");if(!s.ok)throw new Error("Failed to fetch activity data");return s.json()}});return Z?s.jsx(Q,{}):_?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[s.jsx(i,{className:"h-12 w-12 text-red-500 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Unable to load dashboard data. Please try again later."}),s.jsx(t,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Dashboard"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(t,{variant:"outline",size:"sm",children:[s.jsx(l,{className:"mr-2 h-4 w-4"}),"Last 30 Days"]}),s.jsxs(t,{variant:"outline",size:"sm",children:[s.jsx(n,{className:"mr-2 h-4 w-4"}),"Export Report"]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(G,{title:"Total Users",value:J?.totalUsers||0,description:"Active user accounts",icon:s.jsx(c,{className:"h-4 w-4 text-muted-foreground"}),trend:7.2}),s.jsx(G,{title:"Total Stories",value:J?.totalPosts||0,description:"Published stories",icon:s.jsx(n,{className:"h-4 w-4 text-muted-foreground"}),trend:12.5}),s.jsx(G,{title:"Total Comments",value:J?.totalComments||0,description:"User interactions",icon:s.jsx(r,{className:"h-4 w-4 text-muted-foreground"}),trend:24.3}),s.jsx(G,{title:"Total Likes",value:J?.totalLikes||0,description:"Story engagements",icon:s.jsx(d,{className:"h-4 w-4 text-muted-foreground"}),trend:18.7})]}),s.jsxs(m,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(x,{className:"grid grid-cols-3 md:w-auto md:inline-flex",children:[s.jsx(o,{value:"overview",children:"Overview"}),s.jsx(o,{value:"analytics",children:"Analytics"}),s.jsx(o,{value:"activity",children:"Recent Activity"})]}),s.jsxs(j,{value:"overview",className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[s.jsxs(h,{className:"col-span-4",children:[s.jsxs(u,{children:[s.jsx(f,{children:"Weekly Overview"}),s.jsx(N,{children:"Site traffic and engagement metrics for the past 7 days"})]}),s.jsx(p,{className:"pl-2",children:s.jsx(z,{width:"100%",height:300,children:s.jsxs(R,{data:Y,children:[s.jsx(F,{strokeDasharray:"3 3"}),s.jsx(V,{dataKey:"name"}),s.jsx(q,{}),s.jsx(K,{}),s.jsx(T,{}),s.jsx(E,{type:"monotone",dataKey:"visits",stroke:"#8884d8",activeDot:{r:8}}),s.jsx(E,{type:"monotone",dataKey:"comments",stroke:"#82ca9d"}),s.jsx(E,{type:"monotone",dataKey:"likes",stroke:"#ffc658"})]})})})]}),s.jsxs(h,{className:"col-span-3",children:[s.jsxs(u,{children:[s.jsx(f,{children:"Recent Content"}),s.jsx(N,{children:"The latest stories and submissions"})]}),s.jsx(p,{children:s.jsx(v,{className:"h-[324px] pr-4",children:s.jsx("div",{className:"space-y-4",children:J?.recentPosts?.map(e=>s.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:e.title}),s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center",children:[s.jsx(l,{className:"mr-1 h-3 w-3"}),new Date(e.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{variant:"secondary",className:"text-xs",children:e.metadata?.themeCategory||"Story"}),s.jsx(t,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(y,{className:"h-4 w-4"})})]})]},e.id))})})}),s.jsx(g,{children:s.jsx(t,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/admin/content",children:"View All Content"})})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Recent Comments"}),s.jsx(N,{children:"Latest user interactions"})]}),s.jsx(p,{children:s.jsx(v,{className:"h-[200px]",children:s.jsx("div",{className:"space-y-4",children:J?.recentComments?.map(e=>s.jsxs("div",{className:"border-b pb-2 mb-2 last:border-b-0 last:mb-0 last:pb-0",children:[s.jsxs("p",{className:"text-sm",children:[e.content.substring(0,60),"..."]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:e.userId?`User #${e.userId}`:"Anonymous"}),s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[s.jsx(b,{className:"mr-1 h-3 w-3"}),new Date(e.createdAt).toLocaleTimeString()]})]})]},e.id))})})}),s.jsx(g,{children:s.jsx(t,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.location.href="/admin/content-moderation",children:"Moderate Comments"})})]}),s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Admin Team"}),s.jsx(N,{children:"Active administrators"})]}),s.jsx(p,{children:s.jsx(v,{className:"h-[200px]",children:s.jsx("div",{className:"space-y-4",children:J?.adminUsers?.map(e=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(k,{className:"h-5 w-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:e.username}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e.email})]})]},e.id))})})}),s.jsx(g,{children:s.jsx(t,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.location.href="/admin/users",children:"Manage Users"})})]}),s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Quick Actions"}),s.jsx(N,{children:"Common administrative tasks"})]}),s.jsxs(p,{className:"space-y-2",children:[s.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/admin/posts",children:[s.jsx(n,{className:"mr-2 h-4 w-4"}),"Manage Stories"]}),s.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/admin/bug-reports",children:[s.jsx(i,{className:"mr-2 h-4 w-4"}),"Bug Reports"]}),s.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/admin/feedback",children:[s.jsx(r,{className:"mr-2 h-4 w-4"}),"User Feedback"]}),s.jsxs(t,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/admin/content-moderation",children:[s.jsx(C,{className:"mr-2 h-4 w-4"}),"Content Moderation"]})]})]})]})]}),s.jsx(j,{value:"analytics",className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(h,{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[s.jsx(u,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(f,{children:"Performance Metrics"}),s.jsx(N,{children:"Site traffic and engagement over time"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(t,{variant:"week"===X?"default":"outline",size:"sm",onClick:()=>H("week"),children:"Week"}),s.jsx(t,{variant:"month"===X?"default":"outline",size:"sm",onClick:()=>H("month"),children:"Month"}),s.jsx(t,{variant:"year"===X?"default":"outline",size:"sm",onClick:()=>H("year"),children:"Year"})]})]})}),s.jsx(p,{className:"pl-2",children:s.jsx(z,{width:"100%",height:300,children:s.jsxs(B,{data:Y,children:[s.jsx(F,{strokeDasharray:"3 3"}),s.jsx(V,{dataKey:"name"}),s.jsx(q,{}),s.jsx(K,{}),s.jsx(T,{}),s.jsx(O,{dataKey:"visits",fill:"#8884d8",name:"Page Views"}),s.jsx(O,{dataKey:"comments",fill:"#82ca9d",name:"Comments"}),s.jsx(O,{dataKey:"likes",fill:"#ffc658",name:"Likes"})]})})})]}),s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Visitor Statistics"}),s.jsx(N,{children:"User demographics and behavior"})]}),s.jsxs(p,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",children:"Desktop"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"65%"})]}),s.jsx(U,{value:65,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",children:"Mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"30%"})]}),s.jsx(U,{value:30,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",children:"Tablet"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"5%"})]}),s.jsx(U,{value:5,className:"h-2"})]})]}),s.jsx(g,{children:s.jsxs(t,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.location.href="/admin/analytics",children:[s.jsx(W,{className:"mr-2 h-4 w-4"}),"View Detailed Analytics"]})})]}),s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Popular Content"}),s.jsx(N,{children:"Most viewed stories"})]}),s.jsx(p,{children:s.jsx(v,{className:"h-[220px]",children:s.jsx("div",{className:"space-y-4",children:es?Array(5).fill(0).map((e,a)=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(A,{className:"h-5 w-[200px]"}),s.jsx(A,{className:"h-5 w-[50px]"})]},a)):ss?.popularContent?.map((e,a)=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-muted",children:s.jsx(L,{className:"h-4 w-4"})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:e.title.length>30?`${e.title.slice(0,30)}...`:e.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e.category})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-sm font-medium",children:e.views}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"views"})]})]},a))})})})]}),s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Engagement Metrics"}),s.jsx(N,{children:"User interaction statistics"})]}),s.jsxs(p,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(y,{className:"mr-2 h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Avg. Time on Page"})]}),s.jsx("span",{className:"text-sm font-medium",children:"3m 42s"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(I,{className:"mr-2 h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Bounce Rate"})]}),s.jsx("span",{className:"text-sm font-medium",children:"32.4%"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(r,{className:"mr-2 h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Comments per Post"})]}),s.jsx("span",{className:"text-sm font-medium",children:"8.7"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(d,{className:"mr-2 h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Likes per Post"})]}),s.jsx("span",{className:"text-sm font-medium",children:"24.2"})]})]})]})]})}),s.jsx(j,{value:"activity",className:"space-y-4",children:s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(f,{children:"Recent Activity"}),s.jsx(N,{children:"Latest actions in the system"})]}),s.jsx(p,{children:is?s.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map((e,a)=>s.jsxs("div",{className:"flex gap-4",children:[s.jsx(A,{className:"h-12 w-12 rounded-full"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{className:"h-4 w-[250px]"}),s.jsx(A,{className:"h-4 w-[150px]"})]})]},a))}):0===as?.length?s.jsx("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:"No activity logs found"}):s.jsx(v,{className:"h-[500px] pr-4",children:s.jsx("div",{className:"px-1",children:s.jsx(M,{activities:as,initialCollapsed:!1})})})}),s.jsx(g,{children:s.jsx(t,{variant:"outline",className:"w-full",children:"View All Activity"})})]})})]})]})}function G({title:e,value:a,description:i,icon:t,trend:l}){return s.jsxs(h,{children:[s.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(f,{className:"text-sm font-medium",children:e}),t]}),s.jsxs(p,{children:[s.jsx("div",{className:"text-2xl font-bold",children:a.toLocaleString()}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:i}),l>0?s.jsxs("div",{className:"text-xs text-green-500 flex items-center",children:[s.jsx(S,{className:"h-3 w-3 mr-1"}),"+",l,"%"]}):s.jsxs("div",{className:"text-xs text-red-500 flex items-center",children:[s.jsx(S,{className:"h-3 w-3 mr-1 rotate-180"}),l,"%"]})]})]})]})}function Q(){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(A,{className:"h-8 w-[200px]"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-9 w-[120px]"}),s.jsx(A,{className:"h-9 w-[120px]"})]})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array(4).fill(0).map((e,a)=>s.jsxs(h,{children:[s.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(A,{className:"h-5 w-[100px]"}),s.jsx(A,{className:"h-5 w-5 rounded-full"})]}),s.jsxs(p,{children:[s.jsx(A,{className:"h-8 w-[80px] mb-2"}),s.jsx(A,{className:"h-4 w-full"})]})]},a))}),s.jsxs("div",{children:[s.jsx(A,{className:"h-10 w-[300px] mb-4"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[s.jsx("div",{className:"col-span-4",children:s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(A,{className:"h-6 w-[150px] mb-2"}),s.jsx(A,{className:"h-4 w-[250px]"})]}),s.jsx(p,{children:s.jsx(A,{className:"h-[300px] w-full rounded-lg"})})]})}),s.jsx("div",{className:"col-span-3",children:s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(A,{className:"h-6 w-[150px] mb-2"}),s.jsx(A,{className:"h-4 w-[200px]"})]}),s.jsx(p,{children:s.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map((e,a)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx(A,{className:"h-5 w-[200px]"}),s.jsx(A,{className:"h-5 w-[50px]"})]},a))})})]})})]})]})]})}export{$ as default};
