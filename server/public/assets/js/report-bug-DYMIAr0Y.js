import{j as e}from"./ui-XowJfzQ7.js";import{i as s,Z as a,B as r,X as t,a as i,$ as l,d as o,aM as n,a2 as d,a3 as c,a4 as m,a5 as p,a6 as h,I as u,a8 as x,T as g,a7 as f,ak as b,j,al as v,bM as y}from"./index-CaZ-hcXF.js";import{b as N}from"./forms-BLyiBPJV.js";import{r as w}from"./router-ft_y90OU.js";import{U as P}from"./upload-DeAa565m.js";import"./vendor-BbHwBAXo.js";import"./charts-DEf8bB7g.js";import"./utils-SDRWPbZe.js";import"./animations-yM4Nun4l.js";const k=w.forwardRef(({className:i,label:l,helperText:o,error:n,onClear:d,selectedFileName:c,...m},p)=>{const[h,u]=w.useState(c),x=w.useRef(null);w.useImperativeHandle(p,()=>x.current);return e.jsxs("div",{className:"w-full",children:[l&&e.jsx(s,{htmlFor:m.id,className:"mb-2 block text-base",children:l}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",className:"sr-only",ref:x,onChange:e=>{const s=e.target.files;s&&s.length>0?u(s[0].name):u(void 0),m.onChange&&m.onChange(e)},id:m.id,accept:m.accept,disabled:m.disabled}),e.jsxs("div",{className:a("flex items-center border border-input rounded-md overflow-hidden","hover:bg-accent hover:text-accent-foreground",n&&"border-destructive focus-within:ring-destructive",m.disabled&&"opacity-50 cursor-not-allowed",i),children:[e.jsxs(r,{type:"button",variant:"ghost",className:a("h-10 px-4 py-2 bg-muted rounded-none","hover:bg-primary hover:text-primary-foreground","focus:bg-primary focus:text-primary-foreground"),onClick:()=>!m.disabled&&x.current?.click(),disabled:m.disabled,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Browse"]}),e.jsx("div",{className:"px-3 py-2 flex-grow overflow-hidden whitespace-nowrap text-ellipsis text-sm",children:h||"No file selected"}),h&&e.jsxs(r,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 rounded-none",onClick:()=>{x.current&&(x.current.value=""),u(void 0),d&&d()},disabled:m.disabled,children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Clear"})]})]})]}),(o||n)&&e.jsx("p",{className:a("mt-1 text-sm",n?"text-destructive":"text-muted-foreground"),children:n||o})]})});k.displayName="FileInput";const S=["image/jpeg","image/jpg","image/png","image/webp"],F=b({affectedPage:v().min(1,"Please specify which page or feature is affected"),description:v().min(10,"Please provide a detailed description of the issue"),screenshot:y(FileList).refine(e=>0===e.length||1===e.length,"Please upload only one file").refine(e=>0===e.length||e[0]?.size<=5242880,"Max file size is 5MB").refine(e=>0===e.length||S.includes(e[0]?.type),"Only .jpg, .jpeg, .png and .webp formats are supported").optional(),email:v().email("Please enter a valid email address").optional()});function C(){const{toast:s}=i(),a=N({resolver:l(F),defaultValues:{affectedPage:"",description:"",email:""}}),t=o({mutationFn:async e=>{const s=new FormData;return s.append("affectedPage",e.affectedPage),s.append("description",e.description),e.email&&s.append("email",e.email),e.screenshot&&e.screenshot[0]&&s.append("screenshot",e.screenshot[0]),j("/api/bug-report",{method:"POST",body:s,headers:{}})},onSuccess:()=>{s({title:"Bug Report Submitted",description:"Thank you for helping us improve the site!"}),a.reset()},onError:()=>{s({title:"Error",description:"Failed to submit bug report. Please try again.",variant:"destructive"})}});return e.jsxs("div",{className:"container max-w-2xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"prose dark:prose-invert mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(n,{className:"h-8 w-8 text-yellow-500"}),e.jsx("h1",{className:"text-4xl font-bold mb-0",children:"Report a Bug"})]}),e.jsxs("div",{className:"bg-card p-6 rounded-lg border border-border mb-6",children:[e.jsx("p",{className:"text-muted-foreground mb-6 text-lg",children:"We strive to provide a seamless and immersive experience, but if you encounter any issues, we appreciate your help in improving the site. Please use the form below to report any bugs, glitches, or technical issues you experience."}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"What to Include in Your Report:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-base",children:[e.jsx("li",{children:'Page or Feature Affected: (e.g., "Library page won\'t load" or "Dark mode toggle not working")'}),e.jsx("li",{children:"Description of the Issue: A brief explanation of what went wrong."}),e.jsx("li",{children:"Screenshots (if possible): Helps us understand the problem faster."})]})]})]})]}),e.jsx(d,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(function(e){t.mutate(e)}),className:"space-y-6 bg-card p-6 rounded-lg border border-border shadow-lg",children:[e.jsx(c,{control:a.control,name:"affectedPage",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{className:"text-lg",children:"Page or Feature Affected"}),e.jsx(h,{children:e.jsx(u,{placeholder:"e.g., Library page, Dark mode toggle",...s,className:"text-base p-3"})}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"description",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{className:"text-lg",children:"Description of the Issue"}),e.jsx(h,{children:e.jsx(g,{placeholder:"Please describe what happened and what you were trying to do...",className:"min-h-[150px] text-base p-3",...s})}),e.jsx(f,{className:"text-base",children:"Provide as much detail as possible to help us understand and fix the issue."}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"screenshot",render:({field:{value:s,onChange:a,...r},fieldState:t})=>e.jsxs(m,{children:[e.jsx(p,{className:"text-lg",children:"Screenshot (Optional)"}),e.jsx(h,{children:e.jsx(k,{accept:"image/png,image/jpeg,image/webp",helperText:"Upload a screenshot to help us understand the issue better (max 5MB)",error:t.error?.message,onChange:e=>a(e.target.files),...r})}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"email",render:({field:s})=>e.jsxs(m,{children:[e.jsx(p,{className:"text-lg",children:"Email Address (Optional)"}),e.jsx(h,{children:e.jsx(u,{type:"email",placeholder:"your@email.com",className:"text-base p-3",...s})}),e.jsx(f,{className:"text-base",children:"Provide your email if you'd like us to follow up with you about this issue."}),e.jsx(x,{})]})}),e.jsx(r,{type:"submit",size:"lg",className:"w-full text-lg py-6",disabled:t.isPending,children:t.isPending?"Submitting...":"Submit Bug Report"})]})}),e.jsx("div",{className:"mt-8 text-center text-base text-muted-foreground",children:e.jsxs("p",{children:["For critical issues, you can also email us directly at"," ",e.jsx("a",{href:"mailto:vanessachiwetalu@gmail.com",className:"text-primary hover:underline",children:"vanessachiwetalu@gmail.com"})]})})]})}export{C as default};
