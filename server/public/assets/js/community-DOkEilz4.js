import{j as e}from"./ui-XowJfzQ7.js";import{u as s,r as t}from"./router-ft_y90OU.js";import{q as a,a as r,b as i,d as l,C as n,D as o,s as c,B as d,t as m,y as h,b6 as u,bO as x,R as p,G as j,e as g,h as b,f as v,g as y,m as f,n as N,bB as w,M as C,l as k,bd as S,be as P,bf as A,bg as O,bh as R,bi as F,bP as T,ay as E,az as L,aA as M,aB as D,aC as z,o as $,u as q,c as I,N as Y,O as B,P as H,r as G,I as U,bm as W,bQ as Q,bb as V,a1 as _,V as K,aV as J,aH as X,aW as Z,aX as ee}from"./index-CaZ-hcXF.js";import{A as se,a as te,b as ae}from"./avatar-BbyEipG6.js";import{E as re}from"./ellipsis-vertical-18IjHuS2.js";import{S as ie}from"./square-pen-CNm1iWHN.js";import{C as le}from"./copy-BOuW94H4.js";import{a as ne}from"./utils-SDRWPbZe.js";import{F as oe}from"./filter-CwI5yzYg.js";import{C as ce}from"./chevron-left-8pX1j5id.js";import"./vendor-BbHwBAXo.js";import"./charts-DEf8bB7g.js";import"./animations-yM4Nun4l.js";import"./forms-BLyiBPJV.js";const de=a("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),me=a("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),he=a("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),ue=a("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),xe=a("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);function pe({post:a,isAuthenticated:E,currentUser:L,onEdit:M}){const[D,z]=s(),{toast:$}=r(),q=i(),[I,Y]=t.useState(a.hasLiked||!1),[B,H]=t.useState(!1),[G,U]=t.useState(!1),[W,Q]=t.useState(!1),[V,_]=t.useState(""),K=a.createdAt||(new Date).toISOString(),J=ne(new Date(K),"MMM dd, yyyy"),X=L?.id===a.author?.id,Z=!0===L?.isAdmin,ee=(e,s=150)=>T(e,s),oe=a.metadata,ce=oe?.triggerWarnings&&oe.triggerWarnings.length>0,de=l({mutationFn:async()=>{const e=await fetch(`/api/posts/${a.id}/like`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to like post");return e.json()},onMutate:()=>{Y(!0)},onSuccess:()=>{q.invalidateQueries({queryKey:["/api/posts/community"]}),$({title:"Story Liked",description:"You have liked this story."})},onError:e=>{Y(a.hasLiked||!1),$({title:"Error",description:e.message,variant:"destructive"})}}),me=l({mutationFn:async()=>{const e=await fetch(`/api/posts/${a.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to delete post");return e.json()},onSuccess:()=>{q.invalidateQueries({queryKey:["/api/posts/community"]}),U(!1),$({title:"Story Deleted",description:Z&&!X?"Community story has been deleted by admin.":"Your story has been deleted successfully."})},onError:e=>{$({title:"Error",description:e.message,variant:"destructive"})}}),he=l({mutationFn:async e=>{const s=await fetch(`/api/posts/${a.id}/flag`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:e,postId:a.id,postTitle:a.title,reportedAt:(new Date).toISOString(),reportType:"inappropriate_content",reporterName:L?.username||"Anonymous"})});if(!s.ok)throw new Error("Failed to flag post");return s.json()},onSuccess:()=>{Q(!1),_(""),q.setQueryData(["/api/posts/community"],e=>e&&e.posts?{...e,posts:e.posts.map(e=>e.id===a.id?{...e,isFlagged:!0}:e)}:e),$({title:"Report Submitted Successfully",description:"Thank you for keeping our community safe. Our moderation team will review this content shortly.",duration:5e3}),q.invalidateQueries({queryKey:["/api/posts/community"]})},onError:e=>{$({title:"Report Submission Failed",description:e.message||"There was an issue submitting your report. Please try again later.",variant:"destructive",duration:5e3})}}),ue=()=>{U(!0)},pe=()=>{const e=`${window.location.origin}/community-story/${a.slug}`;navigator.clipboard.writeText(e).then(()=>{H(!0),setTimeout(()=>H(!1),2e3),$({title:"Link Copied",description:"Story link has been copied to clipboard."})},()=>{$({title:"Failed to Copy",description:"Could not copy the link to clipboard.",variant:"destructive"})})};return e.jsxs(n,{className:"overflow-hidden transition-all hover:shadow-md mb-6 reader-card relative cursor-pointer",onClick:()=>z(`/community-story/${a.slug}`),children:[e.jsx("div",{onClick:e=>e.stopPropagation(),className:"absolute top-2 right-2 z-10",children:e.jsxs(o,{children:[e.jsx(c,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(m,{align:"end",sideOffset:8,className:"w-[200px] bg-card p-1 shadow-lg rounded-md border border-border",children:[e.jsxs(h,{onClick:()=>z(`/community-story/${a.slug}`),className:"flex items-center rounded-sm px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground cursor-pointer",children:[e.jsx(u,{className:"h-4 w-4 mr-2 text-primary/70"}),"Read Story"]}),X&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{onClick:()=>{M?M(a):z(`/edit-story/${a.id}`)},className:"flex items-center rounded-sm px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground cursor-pointer",children:[e.jsx(ie,{className:"h-4 w-4 mr-2 text-blue-500/70"}),"Edit Story"]}),e.jsxs(h,{onClick:ue,className:"flex items-center rounded-sm px-3 py-2 text-sm hover:bg-destructive/10 text-destructive hover:text-destructive cursor-pointer",children:[e.jsx(x,{className:"h-4 w-4 mr-2 text-destructive/70"}),"Delete Story"]})]}),Z&&!X&&e.jsxs(h,{onClick:ue,className:"flex items-center rounded-sm px-3 py-2 text-sm hover:bg-destructive/10 text-destructive hover:text-destructive cursor-pointer border-t border-t-muted",children:[e.jsx(x,{className:"h-4 w-4 mr-2 text-destructive/70"}),"Admin: Delete Story"]}),e.jsxs(h,{onClick:pe,className:"flex items-center rounded-sm px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground cursor-pointer",children:[B?e.jsx(p,{className:"h-4 w-4 mr-2 text-green-500"}):e.jsx(le,{className:"h-4 w-4 mr-2 text-teal-500/70"}),"Copy Link"]}),e.jsxs(h,{onClick:()=>{navigator.share?navigator.share({title:a.title,text:a.excerpt||ee(a.content),url:`${window.location.origin}/community-story/${a.slug}`}).catch(e=>{}):pe()},className:"flex items-center rounded-sm px-3 py-2 text-sm hover:bg-accent hover:text-accent-foreground cursor-pointer",children:[e.jsx(xe,{className:"h-4 w-4 mr-2 text-indigo-500/70"}),"Share"]}),e.jsxs(h,{onClick:()=>{E?Q(!0):$({title:"Authentication Required",description:"Please sign in to report content",variant:"default"})},disabled:X||a.isFlagged,className:"flex items-center rounded-sm px-3 py-2 text-sm "+(X?"text-muted-foreground cursor-not-allowed":a.isFlagged?"text-amber-600 cursor-not-allowed":"hover:bg-amber-50 hover:text-amber-800 text-amber-700 cursor-pointer"),children:[e.jsx(j,{className:"h-4 w-4 mr-2 "+(a.isFlagged?"text-amber-600":"text-amber-500/70")}),a.isFlagged?"Reported":"Report Story"]})]})]})}),e.jsx(g,{className:"pb-2",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(se,{className:"h-10 w-10 border",children:[e.jsx(te,{src:a.author?.avatar||"",alt:a.author?.username||"Author"}),e.jsx(ae,{children:(()=>{if(!a.author||!a.author.username)return"U";return a.author.username.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.author?.username||"Anonymous"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J})]})]})})}),e.jsxs(b,{className:"pb-4",children:[e.jsx(v,{className:"text-2xl mb-3 font-serif",children:a.title}),e.jsx(y,{className:"mb-4 text-base",children:a.excerpt||ee(a.content,300)}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[(()=>{const s=a.metadata;if(!s?.themeCategory)return null;const t=s.themeCategory;let r="bg-gray-100 text-gray-800 border-gray-300 hover:bg-gray-200",i=t.replace("_"," ");switch(t){case"PSYCHOLOGICAL":r="bg-purple-100 text-purple-800 border-purple-300 hover:bg-purple-200";break;case"SUPERNATURAL":r="bg-indigo-100 text-indigo-800 border-indigo-300 hover:bg-indigo-200";break;case"TECHNOLOGICAL":r="bg-blue-100 text-blue-800 border-blue-300 hover:bg-blue-200";break;case"BODY_HORROR":r="bg-red-100 text-red-800 border-red-300 hover:bg-red-200",i="Body Horror";break;case"GOTHIC":r="bg-slate-100 text-slate-800 border-slate-300 hover:bg-slate-200";break;case"APOCALYPTIC":r="bg-amber-100 text-amber-800 border-amber-300 hover:bg-amber-200"}return e.jsx(f,{variant:"outline",className:r,children:i})})(),ce&&e.jsx(f,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-300 hover:bg-amber-200",children:"Content Warning"})]})]}),e.jsx(N,{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between w-full text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2 "+(I?"text-primary":""),onClick:()=>{E?de.mutate():$({title:"Authentication Required",description:"Please sign in to like stories",variant:"default"})},disabled:de.isPending,children:[e.jsx(w,{className:"h-4 w-4 "+(I?"fill-current":"")}),e.jsx("span",{children:a.likes})]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"flex items-center gap-1 px-2",onClick:()=>z(`/community-story/${a.slug}#comments`),children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:a.commentCount})]})]}),e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-xs",children:[a.readingTimeMinutes||5," min read"]})]})]})}),e.jsx(S,{open:G,onOpenChange:U,children:e.jsxs(P,{children:[e.jsxs(A,{children:[e.jsx(O,{children:Z&&!X?"Admin: Delete Community Story":"Delete Story"}),e.jsx(R,{children:Z&&!X?"As an admin, you are about to delete a user-submitted community story. This action cannot be undone.":"Are you sure you want to delete this story? This action cannot be undone."})]}),e.jsxs("div",{className:"flex items-center justify-between border p-3 rounded-md bg-muted/50 mt-2",children:[e.jsx("div",{className:"font-medium truncate pr-2",children:a.title}),Z&&!X&&e.jsxs(f,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300",children:["By ",a.author?.username||"Anonymous"]})]}),e.jsxs(F,{className:"gap-2 sm:gap-0 mt-4",children:[e.jsx(d,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:()=>{me.mutate()},disabled:me.isPending,children:me.isPending?"Deleting...":"Delete Story"})]})]})}),e.jsx(S,{open:W,onOpenChange:Q,children:e.jsxs(P,{className:"max-w-md",children:[e.jsxs(A,{children:[e.jsxs(O,{className:"flex items-center text-xl",children:[e.jsx(j,{className:"h-5 w-5 mr-2 text-amber-500"}),"Report Inappropriate Content"]}),e.jsx(R,{className:"pt-2 text-sm",children:"Please help us maintain community standards by providing details about why this content is being reported."})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"bg-muted/40 p-3 rounded-md mb-4 border border-muted",children:[e.jsx("h4",{className:"font-medium text-sm mb-1 text-primary/90",children:"Reporting Content:"}),e.jsx("p",{className:"text-sm font-medium truncate",children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["By ",a.author?.username||"Anonymous"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"flag-reason",className:"text-sm font-medium",children:"Reason for Reporting"}),e.jsx("textarea",{id:"flag-reason",className:"w-full min-h-[120px] p-3 border rounded-md text-sm focus:ring-1 focus:ring-primary/30 focus:border-primary/70 transition-colors",placeholder:"Please provide specific details about why this content violates community guidelines...",value:V,onChange:e=>_(e.target.value)}),V.length<10&&V.length>0&&e.jsx("p",{className:"text-xs text-amber-600",children:"Please provide more details (minimum 10 characters)"}),e.jsx("p",{className:"text-xs text-muted-foreground pt-1",children:"Your report will be reviewed by our moderation team. Thank you for helping maintain a positive community experience."})]})]}),e.jsxs(F,{className:"pt-4",children:[e.jsx(d,{variant:"outline",onClick:()=>{Q(!1),_("")},className:"border-slate-200",children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:()=>{V.trim()?V.trim().length<10?$({title:"More Details Needed",description:"Please provide more specific details about the issue (minimum 10 characters).",variant:"default"}):he.mutate(V):$({title:"Reason Required",description:"Please provide a reason for reporting this content.",variant:"default"})},disabled:he.isPending||V.length<10,className:"gap-2",children:he.isPending?e.jsx(e.Fragment,{children:e.jsx("span",{className:"animate-pulse",children:"Processing..."})}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4"}),"Submit Report"]})})]})]})})]})}const je=[{value:"all",label:"All Categories"},{value:"PSYCHOLOGICAL",label:"Psychological"},{value:"SUPERNATURAL",label:"Supernatural"},{value:"TECHNOLOGICAL",label:"Technological"},{value:"BODY_HORROR",label:"Body Horror"},{value:"GOTHIC",label:"Gothic"},{value:"APOCALYPTIC",label:"Apocalyptic"}];function ge({value:s,onChange:t,className:a=""}){return e.jsx("div",{className:`w-full md:w-[180px] ${a}`,children:e.jsxs(E,{value:s,onValueChange:t,children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),e.jsx(M,{placeholder:"Category"})]})}),e.jsx(D,{children:je.map(s=>e.jsx(z,{value:s.value,children:s.label},s.value))})]})})}function be({currentPage:s,totalPages:t,onPageChange:a,maxButtons:r=5}){const i=s??1,l=t??1,n=a??(()=>{});if(l<=1)return null;const o=(()=>{const e=Math.floor(r/2);let s=Math.max(i-e,1),t=Math.min(s+r-1,l);return t===l&&(s=Math.max(t-r+1,1)),Array.from({length:t-s+1},(e,t)=>s+t)})(),c=o[0]>1,m=o[o.length-1]<l;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>n(1),disabled:1===i,className:"hidden sm:flex","aria-label":"First page",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>n(i-1),disabled:1===i,"aria-label":"Previous page",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[c&&e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>n(Math.max(1,o[0]-1)),className:"hidden sm:flex h-8 w-8",children:"..."}),o.map(s=>e.jsx(d,{variant:i===s?"default":"outline",size:"icon",onClick:()=>n(s),className:"h-8 w-8","aria-label":`Page ${s}`,"aria-current":i===s?"page":void 0,children:s},s)),m&&e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>n(Math.min(l,o[o.length-1]+1)),className:"hidden sm:flex h-8 w-8",children:"..."})]}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>n(i+1),disabled:i===l,"aria-label":"Next page",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",size:"icon",onClick:()=>n(l),disabled:i===l,className:"hidden sm:flex","aria-label":"Last page",children:e.jsx(he,{className:"h-4 w-4"})})]})}function ve(){const[a,r]=s(),{user:i,isAuthenticated:l}=q(),[n,o]=t.useState(1),[c,m]=t.useState(""),[h,x]=t.useState("all"),[p,j]=t.useState("newest"),[g,b]=t.useState("all"),[v,y]=t.useState("list"),{data:f,isLoading:N,isError:w,error:k,refetch:S}=I({queryKey:["/api/posts/community",n,h,p,g],queryFn:async()=>{const e=new URLSearchParams;e.append("page",String(n)),e.append("limit",String("list"===v?6:12)),"all"!==h&&e.append("category",h),"newest"===p?(e.append("sort","date"),e.append("order","desc")):"oldest"===p?(e.append("sort","date"),e.append("order","asc")):"popular"===p?(e.append("sort","likes"),e.append("order","desc")):"comments"===p&&(e.append("sort","comments"),e.append("order","desc")),"featured"===g?e.append("featured","true"):"my-stories"===g&&i&&e.append("author",String(i.id)),c&&e.append("search",c);const s=await fetch(`/api/posts/community?${e.toString()}`);if(!s.ok)throw new Error("Failed to fetch community posts");return await s.json()},staleTime:6e4}),P=f?.posts||[],A=f?Math.ceil(f.totalPosts/("list"===v?6:12)):0,O=e=>{r(`/edit-story/${e.id}`)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Community Stories"}),e.jsx("p",{className:"text-muted-foreground",children:"Explore stories written by our community members or share your own."})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(d,{onClick:()=>r("/submit-story"),className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Submit Your Story"]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(Y,{value:g,onValueChange:b,className:"w-full",children:[e.jsxs(B,{className:"mb-6 overflow-x-auto flex w-full justify-start md:justify-center border-b pb-px",children:[e.jsx(H,{value:"all",children:"All Stories"}),e.jsx(H,{value:"featured",children:"Featured"}),l&&e.jsx(H,{value:"my-stories",children:"My Stories"})]}),e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),S()},className:"flex-1 relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(U,{type:"search",placeholder:"Search stories...",className:"w-full pl-10",value:c,onChange:e=>m(e.target.value)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ge,{value:h,onChange:x}),e.jsx("div",{className:"w-full md:w-[180px]",children:e.jsxs(E,{value:p,onValueChange:j,children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center",children:["newest"===p&&e.jsx(W,{className:"h-4 w-4 mr-2"}),"oldest"===p&&e.jsx(W,{className:"h-4 w-4 mr-2"}),"popular"===p&&e.jsx(Q,{className:"h-4 w-4 mr-2"}),"comments"===p&&e.jsx(C,{className:"h-4 w-4 mr-2"}),e.jsx(M,{placeholder:"Sort by"})]})}),e.jsxs(D,{children:[e.jsx(z,{value:"newest",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Newest"]})}),e.jsx(z,{value:"oldest",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Oldest"]})}),e.jsx(z,{value:"popular",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Most Popular"]})}),e.jsx(z,{value:"comments",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Most Comments"]})})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"list"===v?"default":"outline",size:"icon",onClick:()=>y("list"),className:"flex-shrink-0","aria-label":"List view",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(d,{variant:"grid"===v?"default":"outline",size:"icon",onClick:()=>y("grid"),className:"flex-shrink-0","aria-label":"Grid view",children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",onClick:()=>S(),className:"flex-shrink-0","aria-label":"Refresh",children:e.jsx(V,{className:"h-4 w-4"})})]})]})]}),e.jsx(_,{value:g,className:"mt-0",children:N?e.jsx("div",{className:"list"===v?"space-y-6":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array("list"===v?3:6).fill(0).map((s,t)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{className:"h-4 w-[200px]"}),e.jsx(K,{className:"h-3 w-[150px]"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{className:"h-4 w-full"}),e.jsx(K,{className:"h-4 w-full"}),e.jsx(K,{className:"h-4 w-2/3"})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx(K,{className:"h-8 w-[100px]"}),e.jsx(K,{className:"h-8 w-[100px]"})]})]},t))}):w?e.jsxs(J,{variant:"destructive",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(Z,{children:"Error"}),e.jsx(ee,{children:k instanceof Error?k.message:"Failed to load community stories"})]}):0===P.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Stories Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:c?`No stories matching "${c}" were found.`:"my-stories"===g?"You haven't published any stories yet.":"No stories available for the selected filters."}),"my-stories"===g&&e.jsx(d,{onClick:()=>r("/submit-story"),variant:"outline",children:"Write Your First Story"})]}):e.jsx("div",{className:"list"===v?"space-y-6 community-container":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(s=>e.jsx(pe,{post:s,isAuthenticated:l,currentUser:i,onEdit:O},s.id))})})]})}),!N&&P.length>0&&A>1&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx(be,{currentPage:n,totalPages:A,onPageChange:e=>{o(e)}})}),e.jsxs("div",{className:"mt-12 bg-muted/40 rounded-lg p-6 border border-border",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Community Guidelines"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"When submitting or interacting with stories, please keep the following in mind:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{children:"Be respectful of other authors and commenters"}),e.jsx("li",{children:"Use appropriate trigger warnings for sensitive content"}),e.jsx("li",{children:"Original content only - plagiarism is strictly prohibited"}),e.jsx("li",{children:"No excessive gore, explicit content, or hate speech"}),e.jsx("li",{children:"Stories that violate our community standards will be removed"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Continued violations may result in account restrictions. For more information, please read our ",e.jsx("a",{href:"/support/guidelines",className:"underline",children:"full community guidelines"}),"."]})]})]})]})}export{ve as default};
